Bootstrap: docker
From: python:3.10-slim

%post
    apt-get update && apt-get install -y python3-pip
    mkdir -p /src
    cp -r /build_context/* /src
    cd /src/NFACT
    ls 
    pip install --no-cache-dir .

%files
    ../../ /build_context/NFACT
    ../../NFACT/dual_reg/cluster/regression_scripts/cluster_script.py /app/cluster_script.py

%environment
    export PATH=/app:$PATH

%runscript
    exec python /app/cluster_script.py "$@"